<!-- build time:Thu Nov 24 2016 17:46:17 GMT+0800 (CST) --><!doctype html><html class="theme-next mist use-motion"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="baidu-site-verification" content="6c70qR5DN9"><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css"><meta name="keywords" content="Hexo, NexT"><link rel="alternate" href="/atom.xml" title="Chaospace" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1"><meta property="og:type" content="website"><meta property="og:title" content="Chaospace"><meta property="og:url" content="http://fengchao.github.io/page/11/index.html"><meta property="og:site_name" content="Chaospace"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Chaospace"><script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Mist",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!0,duoshuo:{userId:0,author:"博主"}}</script><link rel="canonical" href="http://fengchao.github.io/page/11/"><title>Chaospace</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans,en,default"><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e6e028efa4e1db3bb40b47f735c82723";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="container one-collumn sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Chaospace</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Reshape the world by engineering chaos</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div><span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2009/10/09/No-Software-patent/" itemprop="url">拷问软件专利</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2009-10-09T13:26:27+08:00" content="2009-10-09">2009-10-09 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/技术/" itemprop="url" rel="index"><span itemprop="name">技术</span> </a></span></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2009/10/09/No-Software-patent/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2009/10/09/No-Software-patent/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>这个世界有两种东西：有意义的；无意义的。人们去追求的、想方设法去获取、去创造的通常是有意义的 —— 至少当时是如此。而且获得之后，有事没事也会不断的拷问：这个东西真的有意义么？今天要拷问的，就是软件专利。</p><p>“专利是指一项发明创造,即发明、实用新型或外观设计向国务院专利行政部门提出专利申请，经依法审查合格后，向专利申请人授予的在规定的时间内对该项发明创造享有的专有权”。</p><p>专利可以说是人类历史上最伟大的发明之一。社会由个人构成，有些时候，人群缺乏方向，一团散沙，社会停滞不前；一旦有了方向，哪怕起初看起来那么的微小，由无数的人实行，力量累积起来，绝对的横扫千军、摧枯拉朽。专利制度就是提供了这一推力，给出了一个方向，极大的激发了人们的创新热情。当发明人具有了这种得到保证的专有权，就可以放心大胆的把自己的发明公之于众，不用藏着掖着，不用传男不传女，传内不传外。从某种意义上说，中国的科技水平落后于西方，源于“士农工商“等级的划分，但是与专利制度的缺乏也有着直接的关系。现代专利制度形成与 17 世纪初，恰好在工业革命之前，这种时间上的先后，即使构不成绝对因果，也绝不是一个巧合。</p><p>但是东西再好，也有其界限，比如数学公式、物理定律就是无法获取专利的。假如数学公式能够获得专利，那么只有交了钱或者获得许可的人才能使用这个公式，才能使用高级的逻辑推理，这本身就是很荒谬的一件事情。更重要的是，新的数学进步，总是要建立在已有定律定理的基础之上，有了专利、没有许可的数学家就无法完善、发展的已有成就。所以专利制度将会阻碍数学、物理的发展。所以类似数学、物理公式这种抽象的概念、方法是无法获得专利保护的。</p><p>要问专利制度是否能够扩展到软件，就要问：”软件专利能否促进软件领域的创新“。答案恐怕是肯定的。软件专利不但没能促进创新，反而对阻碍了软件的进步。软件像数学公式定理一样，是逻辑想法的抽象表述。通过思想的交流而促进创新远早于软件而存在，”抽象概念“”自然规律“”和“算法”不应该获取专利是普遍准则。软件不正是“数据结构+算法”么。软件的进步，也是建立在先前软件的基础之上。自由软件、开源软件的成功实例表明：分享软件源代码、分享软件所有权是成功的，通过让所有的人都能够基于现有成果写出新代码，极大的促进了软件的发展。</p><p>所以说，软件专利没有存在的意义，它应该走向灭亡。</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2009/10/09/Unpredictable-stock-market/" itemprop="url">炒股小结</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2009-10-09T13:15:55+08:00" content="2009-10-09">2009-10-09 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/经济/" itemprop="url" rel="index"><span itemprop="name">经济</span> </a></span></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2009/10/09/Unpredictable-stock-market/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2009/10/09/Unpredictable-stock-market/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>大概在上一次股市疯狂的时候，有一个诺贝尔经济学获得者到交大演讲，名字已经忘了，观点还算鲜明：经济行为是人的行为，经济活动中的人会对经济本身产生影响。具体到股市：没有什么理论可以正确的预测它。</p><p>论证方法是反证法：假如这样一个预测理论存在，人们就会用这一理论指导自己的买卖实践。如果这一理论预测 1000 点是最低点，那么所有人都想提前那么一点点埋伏下来，于是在跌到 1001 的时候抄底买入，结果就是跌不到1001，于是大家 1002 买入，照这样反推的结论就是：除非这个理论处于保密状态，否测，即使当时预测准确，一旦大多数人开始使用它，于是理论失效。</p><p>理是这个理，但是只有只身杀入股市，才能领悟这一真理的价值。入市至今，最大的感慨莫过于：股市就喜欢跟人开玩笑。 3400 点的时候，人人都喊至少4000 ，好多人都想：等涨到4000，我就落袋为安。结果大盘挣扎一下之后，掉头向下，毫无抵抗跌破3000，2900，2800 然后大家开始看空，预测要跌破 2200 的大有人在。大盘今天跌4%，无数个股跌停，明天又突然上涨4%，无一个股下跌。大幅的震荡之中，看多看空都不好使了，横尸遍野，无限悲观中，长阳拉起；喜气洋洋，乐观向上时，奋力跳水。如此反复，搞得我早已经见惯不惯。十一之前，舆论一片空，当时就想，股市也许又要开玩笑了吧。</p><p>入市时间不长，经历却也不少了。</p><p>割肉：有卖完之后连拉3个涨停的美罗药业，回头再看K图，几乎是在最低点割肉。原因很简单：机械的遵守止损法则。第一次买股票，股是好股，就是买入太早。连续下跌之后很快浮亏超过15%。那个时候其实是有钱补仓的，但是原来看的好多观点，都是耻笑这种补仓拉低亏损比例的行为。于是很坚决的在止损点割肉，于是交出了股海的第一笔学费。学费还是没有白交的，随后的操作里面，几乎都是通过补仓赚钱。以至于在想，难道选股太超前了，是不是需要人为增加时滞。</p><p>踏浪：中国远洋几乎是一个跌到底的股票，但是不缺乏振荡。算下来，已经四进四出了。每次的钱倒是不多，500股的样子。虽然每次赚钱都不算多，一次刮点，算下来基本补齐了美罗药业的学费。好歹也算是碰到了一个涨停。从来都没有后悔买少，船小好调头，心态是不一样的。心态好了，才容易踩准节奏。这一点在上海建工身上得到了很好的验证。</p><p>贪心：第一次买上海建工，成本15块。有一次大盘很弱的样子，建工很猛，小赚也是赚。当时其实已经点进卖出了，价格都设好了，犹豫了一下，没有卖。当时是贪心了，因为想的是如果再涨1%，也能挣不少钱。1%没涨到，套牢了好久。幸亏后来补了补，没有和美罗药业一样割肉。捞了个涨停卖出，小赚一笔。</p><p>解套：招商地产是我的伤心地，基本上买了就套牢，挨过跌停，深度套牢等着解套。解套再买，再套牢。其实对这个股票基本不熟，只看到28块增发而已。今天大涨，准备解套就从此远离此地。</p><p>股市是测不准的，但是练练级，涨涨经验应该会好些吧:-)。</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2009/09/27/No-title/" itemprop="url">无题</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2009-09-27T14:26:42+08:00" content="2009-09-27">2009-09-27 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/个人/" itemprop="url" rel="index"><span itemprop="name">个人</span> </a></span></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2009/09/27/No-title/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2009/09/27/No-title/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>忽然发现，空间开始长草了。以前的时候什么都写，到如今：技术文章另立门户；流水账转到了谷歌日历。自从抛了基金杀入股市，就再也没有写过什么经济。</p><p>因为自己也很清楚，身陷其中，观点就不客观了。以前天天到水源上鼓吹黄金，鼓动人买贺岁金条，甚至在开心网的模拟炒股里面还在山东黄金上很赚一笔。但是一旦钱成了自己的，在这一波金价暴涨中，却成了无可奈何的看客。有时候不禁怀疑自己，看多黄金的底气到底有多足。</p><p>也许，这就是人性的一大弱点吧。太多的时候，只有走了很远，转身回望的时候，才发现哪里对了，哪里错了。拼命抓住一些东西的同时，错过了另外的东西，真的选对了么？ 我不知道，所以敲键盘的时候，总是心存畏惧。总是想写正确的事情，不希望幡然悔悟的时候，再拐过头来篡改历史。</p><p>曾经跑到酒吧喝得烂醉如泥，身份证银行卡全丢在小黑车上。第二天早上再一次吐酸水的时候，我知道，这种放纵不是我想要的。也许，只有这么放纵过，体会过，才会知道。我的变化是如此明显，以至于小喜子在某次聚会之后郑重的警告过我。渐渐的认识到对未来的生活，自己到底想要什么。和学生时的我相比，这也许就是最大的进步。</p><p>股市休市的时候，时间真得多了许多，所以才有闲心码这么堆字吧。到底该不该退出来，真是一个问题啊。</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2009/09/06/Do-not-be-too-streeful/" itemprop="url">[转]别让自己的心太累</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2009-09-06T14:32:52+08:00" content="2009-09-06">2009-09-06 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/个人/" itemprop="url" rel="index"><span itemprop="name">个人</span> </a></span></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2009/09/06/Do-not-be-too-streeful/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2009/09/06/Do-not-be-too-streeful/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>好久没转过贴了，今天是个例外，有些话真的触动了心。</p><p>如果你不给自己烦恼，别人也永远不可能给你烦恼。因为你自己的内心，你放不下。</p><p>生活中有太多的无奈，有太多的不如意每当有不顺心的事时我们就会抱怨自己是多么的不幸自己是多么的可怜，有时间在一边抱怨不如踏下心来好好想想自己都干了些什么呢。心的负荷沉重。有多少往事不堪回首？有多少记忆没留伤痕？人生不是一杯酒，醉了的，不是好汉，没醉的，不是英雄。所以你我只能半醉半醒，何时能当上那超凡脱俗的大仙？</p><p>人之所以痛苦，在于追求错误的东西。每一种创伤，都是一种成熟。</p><p>心的负荷沉重。寻寻觅觅，何时让生命本色回归自然？何时在精神泥潭突围？何时能锁定新的人生座标？何时让满是皱纹的心灵舒展？也许，亲情友情恋情都得伴随心累的历程？也许，所谓的傲骨与傲气，都得付出心累的代价？也许人的灵魂在某个层面上看，真的是无可救药?也许，什么也许也不要去想，方可减轻那生命难以承受之重。</p><p>当你快乐时你要想这快乐不是永恒的。<br>当你痛苦时你要想这痛苦也不是永恒的。</p><p>岁月蹉跎，时光荏苒，历史的长河流沙滚石，洗濯出几许清静呢，试问又有谁能跳出红尘逍遥自在呢，人活着便注定奔波与劳碌，我们所能做的就是别让心太累。人真正长大以后才会感觉到心灵的负荷，精神的压力，最奢望的莫过于快乐的童年时代，真的希望自己永远也长不大。南来北往的人群中，很多表面上的潇洒与倜傥真能代表他们的内心世界吗，其实很多的答案都是否定的。或许有一个故事在大家心中深深铭刻，伴着成长给你我很多感悟与启迪，我们能做的就是别让自己的心太累。</p><p>你可以拥有爱，但不要执着，因为分离是必然的。你什么时候放下，什么时候就没有烦恼。</p><p>每个人都有过去，这些过去就形成了记忆堆积在心里的角落。一天一天，心里装的越来越多，心儿也越来越重。为何不尝试把过去哪些不开心的事情全部舍弃掉,人活在世上有无数个太多。有太多的分分秒秒、太多的瞬间，也有太多的选择、太多的无奈但这无数个太多的背后，你只能让心去承受沉淀；漫长的人生也是瞬间人生，让心孤独地去感悟吧，也许当心伤痕累累、流尽最后一滴心泪的时候，人生就不再有漫长，也就没有了瞬间！</p><p>情执是苦恼的原因，放下情执，你才能得到自在。来是偶然的，走是必然的。所以你必须，随缘不变，不变随缘。</p><p>生命是一个不停飘移的过程，你我所走过的每一个地方，每一个人，也许都将成为驿站，成为过客，一向喜欢追忆，喜欢回顾，喜欢不忘记。如今却发现，深刻在心里那些东西早已在他们的时间里化成遗忘不要让心太累，不要追想太多已不属于自己的人和事。对于曾经的驿站，只能剪辑却不能驻足，对于曾经的过客，只能感激不能强留。生命的脚步只有不停向前，才可能在生命没逝的时候找到自己的心灵归属。</p><p>世界原本就不是属于你，因此你用不着抛弃，要抛弃的是一切的执着。万物皆为我所用，但非我所属。</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2009/06/15/Link-list-in-linux-kernel/" itemprop="url">Linux 内核中的链表</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2009-06-15T15:32:55+08:00" content="2009-06-15">2009-06-15 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span> </a></span></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2009/06/15/Link-list-in-linux-kernel/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2009/06/15/Link-list-in-linux-kernel/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>通常链表数据结构至少应包含两个域：数据域和指针域，数据域用于存储数据，指针域用于建立与下一个节点的联系。按照指针域的组织以及各个节点之间的联系形式，链表又可以分为单链表、双链表、循环链表等多种类型。在数据结构课本中，链表的经典定义方式通常是这样的（以单链表为例）：</p><pre><code>struct list_node {
    struct list_node *next;
    ElemType    data;
  };
</code></pre><p>这样的数据类型结构清楚，但是因为 next 的类型各不相同，不同的链表类型都必须有不同的操作方式，无法用统一的函数对它们进行处理。所以内核里面使用一个统一的链表将相应的数据结构穿起来。对不同的链表来说，引线都是一样的，差别就在引线上的连接的数据结构不同。如下图所示：</p><p>数据结构的定义就是：</p><pre><code>struct list_head {
    struct list_head *next, *prev;
};

struct list_node {
    struct list_head list;
    ElemType    data;
};
</code></pre><p>这样，对链表的处理最终都会转化为对 list_head 的处理，内核提供了一整套统一的宏和函数来进行(代码位于 include/linux/list.h)。</p><h2 id="宏和函数："><a href="#宏和函数：" class="headerlink" title="宏和函数："></a>宏和函数：</h2><p>（1） 初始化宏</p><pre><code>#define LIST_HEAD_INIT(name) { &amp;(name), &amp;(name) }
#define LIST_HEAD(name) struct list_head name = LIST_HEAD_INIT(name)
</code></pre><p>LIST_HEAD 定义了一个 name 并进行初始化， name 的 next 和 prev 都指向它自己。如下图所示：</p><p>（2） 插入</p><pre><code>/* 内部函数，插入任意位置，前提是 prev 和 next 已知 */
static inline void __list_add(struct list_head *new,
                          struct list_head *prev,
                          struct list_head *next)
{
    next-&gt;prev = new;
    new-&gt;next = next;
    new-&gt;prev = prev;
    prev-&gt;next = new;
}
</code></pre><p>下面量个函数为对 __list_add 的包裹，封装出头部、尾部插入</p><pre><code>static inline void list_add(struct list_head *new, struct list_head *head)
{
    __list_add(new, head, head-&gt;next);
}

static inline void list_add_tail(struct list_head *new, struct list_head *head)
{
    __list_add(new, head-&gt;prev, head);
}
</code></pre><p>（3）删除</p><pre><code>static inline void __list_del(struct list_head * prev, struct list_head * next)
{
    next-&gt;prev = prev;
    prev-&gt;next = next;
}

static inline void list_del(struct list_head *entry)
{
    __list_del(entry-&gt;prev, entry-&gt;next);
    entry-&gt;next = LIST_POISON1;            // 对此位置的引用将报错
    entry-&gt;prev = LIST_POISON2;           // 同上
}
</code></pre><h2 id="3-数据访问："><a href="#3-数据访问：" class="headerlink" title="3. 数据访问："></a>3. 数据访问：</h2><p>以上仅介绍了对链表的操作，也就是能够在一个绳子上移动，而要通过绳子访问链表上的其它数据，就需要一些技巧了。在这里使用了容器的概念，把绳子上穿的数据结构当成容器，连着它 list 成为容器中的一个把手，通过 container_of 这个宏就能根据把手找到对应的容器。</p><pre><code>/**
* list_entry - get the struct for this entry
* @ptr:        the &amp;struct list_head pointer.
* @type:       the type of the struct this is embedded in.
* @member:     the name of the list_struct within the struct.
*/
#define list_entry(ptr, type, member) \
    container_of(ptr, type, member)
</code></pre><p>其中，</p><pre><code>#define container_of(ptr, type, member) ({                  \
    const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);    \
    (type *)( (char *)__mptr - offsetof(type,member) );})
</code></pre><p>这里首先将 ptr 中的地址转化为 member 类型的地址，然后转化为 char 指针并减去 offset。 其中， offset 的意义如下图所示，只需要将 list_head 所在位置减去 offset 的值，就可以得到整个数据结构的起始地址。将这个地址强制转化为 type 类型指针，就得到了指向这个结构体的指针。<br>内核中 offset 有两种获得方式：</p><pre><code>#undef offsetof
#ifdef __compiler_offsetof 
#define offsetof(TYPE,MEMBER) __compiler_offsetof(TYPE,MEMBER)
#else
#define offsetof(TYPE, MEMBER) ((size_t) &amp;((TYPE *)0)-&gt;MEMBER)
#endif
#endif /* __KERNEL__ */
</code></pre><p>第一个种方式由编译器负责产生 offset 的值。第二种方式通过直接用 0 指针的方式获得。这里的技巧是：<br>当编译器看到 ptr-&gt;member 时，会自动将 ptr 中的地址与 member 的偏移量相加，也就是得到 ptr + offsetof(member)。 而当我们将 0 强制转化为 TYPE 指针的时候，得到下式。注意在地址 0 的位置上并没有定义 TYPE 的数据结构，而仅仅是利用编译器的处理方式获得偏移量的位置。</p><pre><code>ptr-&gt;member 
= ptr + offsetof(member) 
= 0 + offsetof(member)
= offsetof(member)
</code></pre><h2 id="4-遍历链表"><a href="#4-遍历链表" class="headerlink" title="4. 遍历链表"></a>4. 遍历链表</h2><p>用这个宏就可以根据链表头地址访问到链表中每一个结构体的位置，对链表中数据结构的操作，就通过 pos 进行。</p><pre><code>/**
* list_for_each_entry -       iterate over list of given type
* @pos:        the type * to use as a loop cursor.
* @head:       the head for your list.
* @member:     the name of the list_struct within the struct.
*/
#define list_for_each_entry(pos, head, member)                      \
    for (pos = list_entry((head)-&gt;next, typeof(*pos), member);      \
         prefetch(pos-&gt;member.next), &amp;pos-&gt;member != (head);        \
         pos = list_entry(pos-&gt;member.next, typeof(*pos), member))
</code></pre></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2009/05/18/Sound-of-opensource-projects/" itemprop="url">几种开源软件名字的读音</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2009-05-18T13:43:49+08:00" content="2009-05-18">2009-05-18 </time></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2009/05/18/Sound-of-opensource-projects/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2009/05/18/Sound-of-opensource-projects/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>2006-09-30 08:57　 来源:<a href="http://www.linuxplanet.com/linuxplanet/tutorials/6277/1/" target="_blank" rel="external">http://www.linuxplanet.com/linuxplanet/tutorials/6277/1/</a> 编辑:infohunter　　 开源软件的名字都比较“奇怪”，其读音也令人费解，看了网上一外国友人的文章，感觉挺有意思，下面简单给出几种“难度”较高的名字的正确读音与大家分享：</p><p>GNU/Linux： 可能很多人都不知道GNU的发音，因而直接读成G-N-U，实际上根据GNU官方网站的说法， GNU应该发成guh-Noo，类似于‘伽努’的发音。至于Linux，发音就千奇百怪了，主要的差别在于字母u的读音上。这个u呢，有发成‘衣’的，有 发成‘优’的，发成‘乌’，有发成‘er’的，还有发成‘a’的，我听到的发‘衣’和‘乌’的比较多，其他的基本没听到过。那么这个Linux到底怎么 读，还是来听听Torvalds自己的读音：</p><p>这里是mp3: <a href="http://www.paul.sladen.org/pronunciation/torvalds-says-linux.mp3" target="_blank" rel="external">http://www.paul.sladen.org/pronunciation/torvalds-says-linux.mp3</a></p><p>他说：Hello, I am Linus Torvalds, I pronounce Linux as Linux.</p><p>我听了好几遍，应该是发成类似‘er’的音（就是bonus这个词里的u的发音），所以Linux应该读成‘李呢克斯’</p><p>SUSE: Novell的发行版，以“易使用，难发音”著名。这个也是比较混乱的那种，怎么读的都有，来个权威的吧：来自Novell的发音 —— Soo-suh（苏塞？？苏瑟？？苏撒？？反正不是苏西）</p><p>Ubuntu: 最流行的发行版，我估计没几个中国人会念这个词。来自Ubuntu父公司的Marlize Coetzee说：“Ubuntu，来自非洲祖鲁族(Zulu)和克萨族(Xhosa)人的单词，读成oo-boon-too(乌奔突)”</p><p>Debian： 好像很多人（包括我）都读成“地被恩”，但事实并非如此，这个看起来很有异国情调的词语实际的来源很简单，就是两个人名的连接 —— Deb 和 Ian，所以，正确的读法是DEB-ee-un</p><p>Azureus: 如何读这个著名的BT客户端软件的名字一直都是人们争论的焦点，Azureus官方声明此单词没有官方读音，但是他们建议读成uh-Zoo-ree-us</p><p>Liferea: 这个著名的RSS阅读器的名字来自如下缩写：LInux FEed REAder。该项目的领导者Lars Lindner说：“我，一个德国人，这样读这个名字的’lee-fer-rejah’（注：本人学过一点德语，所以发音肯定是‘丽菲雷亚’，很美的名字 啊）。但是我想很多英语国家的人会发另外一种很不同的音，因此该单词没有官方读音”</p><p>QT: 这个非常有意思，很多人都读成字母Q-T，但是奇趣公司给的官方读音是Cute，怪不得QT做出来的界面如此可爱呢.<br>——————————————————————————————————<br>悲哀在于,所有硬件都主动去追求WINDOWS</p><p>遗憾的是, Linux 却要主动去追求所有硬件</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2006/11/16/Sun-Opens-Java/" itemprop="url">Sun 开源了 Java</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2006-11-16T13:36:01+08:00" content="2006-11-16">2006-11-16 </time></span><span class="post-comments-count">&nbsp; | &nbsp; <a href="/2006/11/16/Sun-Opens-Java/#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2006/11/16/Sun-Opens-Java/" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="/images/java_logo.jpg" alt="Java" title="Title"></p><p>13.November.2006—Sun believes deeply in creating communities and sharing innovations and technologies to foster more participation. Today in a historic move, Sun is opening the door to greater innovation by open sourcing key Java implementations—Java Platform Standard Edition (Java SE), Java Platform Micro Edition (Java ME), and Java Platform Enterprise Edition (Java EE)—under the GNU General Public License version 2 (GPLv2), the same license as GNU/Linux.</p><p>Sun is now the biggest contributor to the open-source community. Already Sun has released open-source implementations of its Solaris Operating System, NetBeans, Project Looking Glass, Project JXTA, Jini, OpenOffice, OpenSPARC, and Java EE technologies and is continuing on its path to open all of its middleware. By adding a second GPLv2 license to Java EE, which was previously available under the CDDL license through Project Glassfish, Sun is now open sourcing all core Java technologies under the same license.</p><p>Through this move, Sun is helping to:</p><p>Fuel innovation and build broader developer communities by enabling interested Java developers, as well as developers in the GNU/Linux community, to contribute more easily to the evolution of Java technology<br>Drive faster evolution of the Java platform and adoption by new developers and in new markets while ensuring platform quality and flexibility<br>Allow the 5 million Java developers worldwide to leverage platform enhancements and speed time to market for new applications<br>Enlisting the World to Innovate<br>For the past 11 years, Java technology has enabled developers to Write Once, Run Anywhere. Sun’s commitment to compatibility and choice has made Java the most widely deployed application platform. Java technology is currently used on more than 4 billion devices worldwide, and the Java ME platform ships on more than eight of every 10 mobile handsets.</p><p>Sun believes Java technology has reached the right level of maturity, adoption, and innovation—with widespread use across enterprises and devices—to move into the next stage of its evolution. In the largest single contribution under the GNU GPL, Sun is releasing all of its key Java implementations under this widely respected free-software license:</p><p>Open-Source Java SE: Today Sun is releasing the source code for the Java HotSpot virtual machine, the Java programming language compiler (javac), and JavaHelp online help software. Release of a fully buildable Java SE Development Kit (JDK) based nearly entirely on open-source code is expected in the first half of 2007.<br>Open-Source Java ME: Sun is first releasing the source code for Sun’s Java ME Feature Phone implementation based on Connected Limited Device Configuration (CLDC), which currently enables rich mobile data services in more than 1.5 billion handsets, and the source code for the Java ME testing and compatibility kit (TCK) framework. Later this year, Sun will release additional source code for the Advanced Operating System Phone implementation for based on the Connected Device Configuration (CDC) specification and the framework for the Java Device Test Suite.<br>New Developer Communities: Tapping its experience in building dynamic and transparent open-source communities, Sun is launching the OpenJDK Community and the Mobile &amp; Embedded Community to support developer participation in evolving the open-source JDK and open-source Java ME implementations respectively.<br>Developers wanting to get started right away can take advantage of the best tool for open-source Java application development: the NetBeans Integrated Development Environment (IDE). The NetBeans IDE provides complete support for the entire Java platform, from Java ME to Java SE to Java EE. To further speed time to market, Sun is also providing pre-built NetBeans projects at netbeans.org for the Java language components being open sourced and is making the Sun Studio development environment available at developers.sun.com/sunstudio for the native Java language components.</p><p>Open-Source Opportunities<br>By open sourcing its Java implementations, Sun will open new market opportunities, fuel innovation, and drive broader adoption of this Web 2.0 platform while minimizing fragmentation in the mobile community by delivering a consistent application platform across devices.</p><p>Developers and ISVs can build differentiated Java technology-based applications and value-added Web. 2.0 services more quickly through access to the latest Java source code.<br>Developers can improve platform quality and functionality by contributing feature enhancements, bug fixes, and testing results to the open-source Java initiatives.<br>Customers can lower costs and protect technology investments by taking full advantage of open-source business models that allow for free substitution of alternative operating systems, architectures, middleware, and devices on industry-standard hardware.<br>Governments and educational institutions can reap the benefits of open-source Java technologies while ensuring security, privacy, and datacenter control.<br>GNU/Linux distributors can add no-cost Java implementations to their distributions, while customers with stringent open-source requirements can deploy a free, reliable Java software stack on most GNU/Linux distributions.<br>Sun is taking careful and deliberate action as it open sources its Java technology implementations to help ensure that Java remains a central unifying standard for the Internet. Whether developers and customers choose to use Sun’s commercial Java platforms or new open-source implementations, Java technology will continue to deliver the compatibility, stability, and quality required to turn Web 2.0 advancements into competitive advantage.</p><p>Go to sun.com/opensource/java for more information.</p></div><div></div><div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></section><nav class="pagination"><a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview sidebar-panel sidebar-panel-active"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Feng Chao"><p class="site-author-name" itemprop="name">Feng Chao</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">107</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories"><span class="site-state-item-count">10</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags"><span class="site-state-item-count">5</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/fengchao" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub </a></span><span class="links-of-author-item"><a href="https://twitter.com/fengchao" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i> Twitter</a></span></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2008 - <span itemprop="copyrightYear">2016</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Feng Chao</span></div><div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info">主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script><script type="text/javascript">var duoshuoQuery={short_name:"chaosite"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script><script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script><script src="/js/src/hook-duoshuo.js"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!0,s=r.title.trim().toLowerCase(),n=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=r.url,o=-1,l=-1,p=-1;if(""!=s&&""!=n&&a.forEach(function(e,t){o=s.indexOf(e),l=n.indexOf(e),o<0&&l<0?c=!1:(l<0&&(l=0),0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+i+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script><script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js"></script></body></html><!-- rebuild by neat -->